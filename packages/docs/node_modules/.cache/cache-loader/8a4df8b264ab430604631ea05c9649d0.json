{"remainingRequest":"/home/barbosa/javascript/useform/packages/docs/node_modules/babel-loader/lib/index.js??ref--7-1!/home/barbosa/javascript/useform/packages/useform/src/hooks/useValidation.ts","dependencies":[{"path":"/home/barbosa/javascript/useform/packages/useform/src/hooks/useValidation.ts","mtime":1603637821148},{"path":"/home/barbosa/javascript/useform/node_modules/cache-loader/dist/cjs.js","mtime":1603638032289},{"path":"/home/barbosa/javascript/useform/packages/docs/node_modules/babel-loader/lib/index.js","mtime":1603638031594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlYWN0IGZyb20icmVhY3QiO2ltcG9ydCBkb3QgZnJvbSdkb3QtcHJvcC1pbW11dGFibGUnO2ltcG9ydHttYWtlRG90Tm90YXRpb259ZnJvbSIuLi91dGlscyI7ZXhwb3J0IGZ1bmN0aW9uIHVzZVZhbGlkYXRpb24odmFsdWVzLHNjaGVtYSl7Y29uc3RbZXJyb3JzLHNldEVycm9yc109UmVhY3QudXNlU3RhdGUoe30pO2NvbnN0IHZhbGlkYXRlPVJlYWN0LnVzZUNhbGxiYWNrKCgpPT57c2NoZW1hPT09bnVsbHx8c2NoZW1hPT09dm9pZCAwP3ZvaWQgMDpzY2hlbWEudmFsaWRhdGUodmFsdWVzLHthYm9ydEVhcmx5OmZhbHNlfSkudGhlbigoKT0+e3NldEVycm9ycyh7fSk7fSkuY2F0Y2goZT0+e2xldCBlcnJvcnM9e307ZS5pbm5lci5mb3JFYWNoKGtleT0+e2NvbnN0IHBhdGg9bWFrZURvdE5vdGF0aW9uKGtleS5wYXRoKTtlcnJvcnM9ZG90LnNldChlcnJvcnMscGF0aCxrZXkubWVzc2FnZSk7fSk7c2V0RXJyb3JzKHsuLi5lcnJvcnN9KTt9KTt9LFtzY2hlbWEsdmFsdWVzXSk7UmVhY3QudXNlRWZmZWN0KCgpPT57dmFsaWRhdGUoKTt9LFt2YWxpZGF0ZV0pO3JldHVybntlcnJvcnMsaXNWYWxpZDpPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aD09PTB9O30="},{"version":3,"sources":["/home/barbosa/javascript/useform/packages/useform/src/hooks/useValidation.ts"],"names":["React","dot","makeDotNotation","useValidation","values","schema","errors","setErrors","useState","validate","useCallback","abortEarly","then","catch","e","inner","forEach","key","path","set","message","useEffect","isValid","Object","keys","length"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,oBAAhB,CACA,OAASC,eAAT,KAAgC,UAAhC,CAEA,MAAO,SAASC,CAAAA,aAAT,CAA8EC,MAA9E,CAA+FC,MAA/F,CAAgH,CACpH,KAAM,CAACC,MAAD,CAASC,SAAT,EAAsBP,KAAK,CAACQ,QAAN,CAAwB,EAAxB,CAA5B,CAEA,KAAMC,CAAAA,QAAQ,CAAGT,KAAK,CAACU,WAAN,CAAkB,IAAM,CAEtCL,MAAM,OAAN,EAAAA,MAAM,SAAN,QAAAA,MAAM,CAAEI,QAAR,CAAiBL,MAAjB,CAAyB,CAAEO,UAAU,CAAE,KAAd,CAAzB,EACIC,IADJ,CACS,IAAM,CACTL,SAAS,CAAC,EAAD,CAAT,CACF,CAHJ,EAIIM,KAJJ,CAIWC,CAAD,EAAwB,CAC5B,GAAIR,CAAAA,MAAM,CAAG,EAAb,CACAQ,CAAC,CAACC,KAAF,CAAQC,OAAR,CAAgBC,GAAG,EAAI,CACpB,KAAMC,CAAAA,IAAI,CAAGhB,eAAe,CAACe,GAAG,CAACC,IAAL,CAA5B,CAEAZ,MAAM,CAAGL,GAAG,CAACkB,GAAJ,CAAQb,MAAR,CAAgBY,IAAhB,CAAsBD,GAAG,CAACG,OAA1B,CAAT,CACF,CAJD,EAKAb,SAAS,CAAC,CAAE,GAAGD,MAAL,CAAD,CAAT,CACF,CAZJ,EAcF,CAhBgB,CAgBd,CAACD,MAAD,CAASD,MAAT,CAhBc,CAAjB,CAkBAJ,KAAK,CAACqB,SAAN,CAAgB,IAAM,CACnBZ,QAAQ,GACV,CAFD,CAEG,CAACA,QAAD,CAFH,EAIA,MAAO,CAAEH,MAAF,CAAUgB,OAAO,CAAEC,MAAM,CAACC,IAAP,CAAYlB,MAAZ,EAAoBmB,MAApB,GAA+B,CAAlD,CAAP,CACF","sourcesContent":["import React from \"react\"\nimport { ValidationError, Schema as YupSchema } from \"yup\"\nimport dot from 'dot-prop-immutable'\nimport { makeDotNotation } from \"../utils\"\n\nexport function useValidation<TValues extends {}, Schema extends YupSchema<TValues>>(values: TValues, schema?: Schema) {\n   const [errors, setErrors] = React.useState<TValues>({} as TValues)\n\n   const validate = React.useCallback(() => {\n\n      schema?.validate(values, { abortEarly: false })\n         .then(() => {\n            setErrors({} as TValues)\n         })\n         .catch((e: ValidationError) => {\n            let errors = {}\n            e.inner.forEach(key => {\n               const path = makeDotNotation(key.path)\n\n               errors = dot.set(errors, path, key.message)\n            })\n            setErrors({ ...errors } as TValues)\n         })\n\n   }, [schema, values])\n\n   React.useEffect(() => {\n      validate()\n   }, [validate])\n\n   return { errors, isValid: Object.keys(errors).length === 0 }\n}"]}]}